```sql
-- Создание табличного пространства.
CREATE TABLESPACE SHOP_DATA LOCATION '/shop_data';

--Перенос базы в новое табличное пространство
ALTER DATABASE otusdb SET TABLESPACE shop_data;

--Создание схемы
CREATE SCHEMA SHOP_SC;

--Перенос таблиц в новую схему
ALTER TABLE  customers 
    SET TABLESPACE shop_data;
ALTER TABLE  customers
    SET SCHEMA shop_sc;
	
ALTER TABLE  manufacturer 
    SET TABLESPACE shop_data;
ALTER TABLE  manufacturer
    SET SCHEMA shop_sc;
	
ALTER TABLE  orders 
    SET TABLESPACE shop_data;
ALTER TABLE  orders
    SET SCHEMA shop_sc;
	
ALTER TABLE  personal 
    SET TABLESPACE shop_data;
ALTER TABLE  personal
    SET SCHEMA shop_sc;
	
ALTER TABLE  price 
    SET TABLESPACE shop_data;
ALTER TABLE  price
    SET SCHEMA shop_sc;
	
ALTER TABLE  product 
    SET TABLESPACE shop_data;
ALTER TABLE  product
    SET SCHEMA shop_sc;
	
ALTER TABLE  product_category 
    SET TABLESPACE shop_data;
ALTER TABLE  product_category
    SET SCHEMA shop_sc;
	
ALTER TABLE  provider 
    SET TABLESPACE shop_data;
ALTER TABLE  provider
    SET SCHEMA shop_sc;
	
ALTER TABLE  stock 
    SET TABLESPACE shop_data;
ALTER TABLE  stock
    SET SCHEMA shop_sc;

-- Создание ролей и доступов.

CREATE ROLE SHOP_ADMIN;
CREATE ROLE SHOP_MANAGER;
CREATE ROLE CUSTOMERS;
GRANT ALL PRIVILEGES ON DATABASE otusdb to SHOP_ADMIN;

GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA shop_sc TO SHOP_ADMIN;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA shop_sc TO SHOP_ADMIN;

GRANT SELECT, INSERT, UPDATE ON ALL TABLES IN SCHEMA shop_sc TO SHOP_MANAGER;
GRANT SELECT, UPDATE ON ALL SEQUENCES IN SCHEMA shop_sc TO SHOP_MANAGER;

GRANT SELECT ON shop_sc.CUSTOMERS TO CUSTOMERS;
GRANT SELECT ON shop_sc.PRICE TO CUSTOMERS;
GRANT SELECT ON shop_sc.MANUFACTURER TO CUSTOMERS;
GRANT SELECT ON shop_sc.ORDERS TO CUSTOMERS;
GRANT SELECT ON shop_sc.PRICE TO CUSTOMERS;
GRANT SELECT ON shop_sc.PRODUCT TO CUSTOMERS;
GRANT SELECT ON shop_sc.PRODUCT_CATEGORY TO CUSTOMERS;
GRANT SELECT ON shop_sc.PROVIDER TO CUSTOMERS;
GRANT SELECT ON shop_sc.STOCK TO CUSTOMERS;

ALTER DEFAULT PRIVILEGES IN SCHEMA shop_sc
  GRANT ALL PRIVILEGES ON TABLES TO SHOP_ADMIN;
ALTER DEFAULT PRIVILEGES IN SCHEMA shop_sc
  GRANT ALL PRIVILEGES ON SEQUENCES TO SHOP_ADMIN;
```
	
